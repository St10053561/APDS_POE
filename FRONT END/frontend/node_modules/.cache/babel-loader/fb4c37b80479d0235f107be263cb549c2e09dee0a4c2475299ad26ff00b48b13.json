{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostCreate(){const[form,setForm]=useState({content:'',image:null});const navigate=useNavigate();// Correct usage of useNavigate\nfunction updateForm(value){return setForm(prev=>{return{...prev,...value};});}function handleImageChange(e){setForm({...form,image:e.target.files[0]});}async function onSubmit(e){e.preventDefault();// Create a new FormData object to handle file upload\nconst formData=new FormData();formData.append('content',form.content);if(form.image){formData.append('image',form.image);}try{// Send a POST request to the server\nconst response=await fetch('http://localhost:3001/posts',{method:'POST',body:formData});// Check if the response is ok (status in the range 200-299)\nif(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}// Parse the JSON response\nconst data=await response.json();console.log('Post created:',data);// Reset the form state\nsetForm({content:'',image:null});// Navigate to the home page or another page\nnavigate('/');}catch(error){console.error('Error creating post:',error);window.alert(`An error occurred: ${error.message}`);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"content\",value:form.content,onChange:e=>updateForm({content:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",id:\"image\",accept:\"image/*\",onChange:handleImageChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Create Post\",className:\"btn btn-primary\"})})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","PostCreate","form","setForm","content","image","navigate","updateForm","value","prev","handleImageChange","e","target","files","onSubmit","preventDefault","formData","FormData","append","response","fetch","method","body","ok","Error","status","data","json","console","log","error","window","alert","message","className","children","htmlFor","type","id","onChange","accept"],"sources":["C:/Users/vicky/Downloads/OpenSSL-Win64/APDS LAB GUIDE/FRONT END/frontend/src/components/postCreate.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function PostCreate() {\r\n    const [form, setForm] = useState({\r\n        content: '',\r\n        image: null\r\n    });\r\n\r\n    const navigate = useNavigate(); // Correct usage of useNavigate\r\n\r\n    function updateForm(value) {\r\n        return setForm((prev) => {\r\n            return { ...prev, ...value };\r\n        });\r\n    }\r\n\r\n    function handleImageChange(e) {\r\n        setForm({ ...form, image: e.target.files[0] });\r\n    }\r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        // Create a new FormData object to handle file upload\r\n        const formData = new FormData();\r\n        formData.append('content', form.content);\r\n        if (form.image) {\r\n            formData.append('image', form.image);\r\n        }\r\n\r\n        try {\r\n            // Send a POST request to the server\r\n            const response = await fetch('http://localhost:3001/posts', {\r\n                method: 'POST',\r\n                body: formData\r\n            });\r\n\r\n            // Check if the response is ok (status in the range 200-299)\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            // Parse the JSON response\r\n            const data = await response.json();\r\n            console.log('Post created:', data);\r\n\r\n            // Reset the form state\r\n            setForm({ content: '', image: null });\r\n\r\n            // Navigate to the home page or another page\r\n            navigate('/');\r\n        } catch (error) {\r\n            console.error('Error creating post:', error);\r\n            window.alert(`An error occurred: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <h3>Create New Post</h3>\r\n            <form onSubmit={onSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor='content'>Content</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        className='form-control'\r\n                        id=\"content\"\r\n                        value={form.content}\r\n                        onChange={(e) => updateForm({ content: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div className='form-group'>\r\n                    <label htmlFor='image'>Image</label>\r\n                    <input\r\n                        type='file'\r\n                        className='form-control'\r\n                        id='image'\r\n                        accept='image/*'\r\n                        onChange={handleImageChange}\r\n                    />\r\n                </div>\r\n                <div className='form-group'>\r\n                    <input\r\n                        type='submit'\r\n                        value='Create Post'\r\n                        className='btn btn-primary'\r\n                    />\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}