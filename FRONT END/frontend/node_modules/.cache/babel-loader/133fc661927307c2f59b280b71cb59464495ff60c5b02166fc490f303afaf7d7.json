{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import'../App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Post=props=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:props.post.user}),/*#__PURE__*/_jsx(\"td\",{children:props.post.content}),/*#__PURE__*/_jsx(\"td\",{children:props.post.image&&/*#__PURE__*/_jsx(\"img\",{// Convert base64 string to image\nsrc:`data:image/jpeg;base64, ${props.post.image}`,alt:\"Post Image\",style:{maxWidth:'100px',maxHeight:'100px',objectFit:'cover'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link\",onClick:()=>{props.deletePost(props.post._id);},children:\"Delete\"})})]});export default function PostList(){const[posts,setPosts]=useState([]);useEffect(()=>{async function getPosts(){try{const response=await fetch('https://localhost:3001/post/');// Log the response to see what is being returned\nconsole.log(response);if(!response.ok){const message=`An error occurred: ${response.statusText}`;window.alert(message);return;}// Log the response text to see the actual content\nconst responseText=await response.text();console.log(responseText);// Parse the response text as JSON\nconst posts=JSON.parse(responseText);setPosts(posts);}catch(error){console.error('Fetch error:',error);// Log the error details\nwindow.alert(`An error occurred: ${error.message}`);}}getPosts();},[]);async function deletePost(id){const token=localStorage.getItem('jwt');await fetch(`https://localhost:3001/post/${id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const newPosts=posts.filter(el=>el._id!==id);setPosts(newPosts);}function PostList(){return posts.map(post=>{return/*#__PURE__*/_jsx(Post,{post:post,deletePost:()=>deletePost(post._id)},post._id);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"header\",children:\"APDS Notice Board\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",style:{marginTop:20},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Caption\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:posts.map(post=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:post.user}),/*#__PURE__*/_jsx(\"td\",{children:post.content}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:post.image,alt:post.content,style:{width:'100px'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:`/edit/${post._id}`,className:\"btn btn-primary\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",style:{marginLeft:'10px'},onClick:()=>deletePost(post._id),children:\"Delete\"})]})]},post._id))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Post","props","children","post","user","content","image","src","alt","style","maxWidth","maxHeight","objectFit","className","onClick","deletePost","_id","PostList","posts","setPosts","getPosts","response","fetch","console","log","ok","message","statusText","window","alert","responseText","text","JSON","parse","error","id","token","localStorage","getItem","method","headers","newPosts","filter","el","map","marginTop","width","to","marginLeft"],"sources":["C:/Users/vicky/Downloads/OpenSSL-Win64/APDS LAB GUIDE/FRONT END/frontend/src/components/postList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../App.css';\r\n\r\nconst Post = (props) => (\r\n  <tr>\r\n    <td>{props.post.user}</td>\r\n    <td>{props.post.content}</td>\r\n    <td>\r\n      {props.post.image && (\r\n        <img\r\n          // Convert base64 string to image\r\n          src={`data:image/jpeg;base64, ${props.post.image}`}\r\n          alt=\"Post Image\"\r\n          style={{ maxWidth: '100px', maxHeight: '100px', objectFit: 'cover' }}\r\n        />\r\n      )}\r\n    </td>\r\n    <td>\r\n      <button className='btn btn-link' onClick={() => {\r\n        props.deletePost(props.post._id);\r\n      }}>\r\n        Delete\r\n      </button>\r\n    </td>\r\n  </tr>\r\n);\r\n\r\nexport default function PostList() {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function getPosts() {\r\n      try {\r\n\r\n        const response = await fetch('https://localhost:3001/post/');\r\n\r\n        // Log the response to see what is being returned\r\n        console.log(response);\r\n\r\n        if (!response.ok) {\r\n          const message = `An error occurred: ${response.statusText}`;\r\n          window.alert(message);\r\n          return;\r\n        }\r\n\r\n        // Log the response text to see the actual content\r\n        const responseText = await response.text();\r\n        console.log(responseText);\r\n\r\n        // Parse the response text as JSON\r\n        const posts = JSON.parse(responseText);\r\n        setPosts(posts);\r\n      } catch (error) {\r\n\r\n        console.error('Fetch error:', error); // Log the error details\r\n        window.alert(`An error occurred: ${error.message}`);\r\n      }\r\n    }\r\n    getPosts();\r\n  }, []);\r\n\r\n  async function deletePost(id) {\r\n    const token = localStorage.getItem('jwt');\r\n    await fetch(`https://localhost:3001/post/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const newPosts = posts.filter((el) => el._id !== id);\r\n    setPosts(newPosts);\r\n  }\r\n\r\n  function PostList() {\r\n    return posts.map((post) => {\r\n      return (\r\n        <Post post={post} deletePost={() => deletePost(post._id)} key={post._id} />\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className='container'>\r\n      <h3 className='header'>APDS Notice Board</h3>\r\n      <table className='table table-striped' style={{ marginTop: 20 }}>\r\n        <thead>\r\n          <tr>\r\n            <th>User</th>\r\n            <th>Caption</th>\r\n            <th>Image</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {posts.map((post) => (\r\n            <tr key={post._id}>\r\n              <td>{post.user}</td>\r\n              <td>{post.content}</td>\r\n              <td><img src={post.image} alt={post.content} style={{ width: '100px' }} /></td>\r\n              <td>\r\n                <Link to={`/edit/${post._id}`} className='btn btn-primary'>Edit</Link>\r\n                <button className='btn btn-danger' style={{ marginLeft: '10px' }} onClick={() => deletePost(post._id)}>Delete</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}