{"ast":null,"code":"import React,{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import{AuthContext}from'../AuthContext.js';// Import the AuthContext\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[form,setForm]=useState({usernameOrAccountNumber:'',password:''});const{setAuth}=useContext(AuthContext);// Use the context\nconst navigate=useNavigate();function updateForm(value){return setForm(prev=>{return{...prev,...value};});}async function onSubmit(e){e.preventDefault();try{// Send a POST request to the server using HTTPS\nconst response=await fetch('https://localhost:3001/user/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(form)});// Check if the response is ok (status in the range 200-299)\nif(!response.ok){const errorData=await response.json();throw new Error(`HTTP error! status: ${response.status}, message: ${errorData.message}`);}const data=await response.json();console.log('Login successful:',data);// Update the context with the token and username\nsetAuth({token:data.token,username:data.username});// Navigate to the home page or another page\nnavigate('/');}catch(error){console.error('Error during login:',error);window.alert(`An error occurred: ${error.message}`);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"usernameOrAccountNumber\",children:\"Username or Account Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"usernameOrAccountNumber\",value:form.usernameOrAccountNumber,onChange:e=>updateForm({usernameOrAccountNumber:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",value:form.password,onChange:e=>updateForm({password:e.target.value})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-primary\"})})]})]});}","map":{"version":3,"names":["React","useState","useContext","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","form","setForm","usernameOrAccountNumber","password","setAuth","navigate","updateForm","value","prev","onSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","status","message","data","console","log","token","username","error","window","alert","className","children","htmlFor","type","id","onChange","target"],"sources":["C:/Users/vicky/Downloads/OpenSSL-Win64/APDS POE/FRONT END/frontend/src/components/login.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { AuthContext } from '../AuthContext.js'; // Import the AuthContext\r\n\r\nexport default function Login() {\r\n    const [form, setForm] = useState({\r\n        usernameOrAccountNumber: '',\r\n        password: ''\r\n    });\r\n\r\n    const { setAuth } = useContext(AuthContext); // Use the context\r\n    const navigate = useNavigate();\r\n\r\n    function updateForm(value) {\r\n        return setForm((prev) => {\r\n            return { ...prev, ...value };\r\n        });\r\n    }\r\n\r\n    async function onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            // Send a POST request to the server using HTTPS\r\n            const response = await fetch('https://localhost:3001/user/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(form)\r\n            });\r\n\r\n            // Check if the response is ok (status in the range 200-299)\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(`HTTP error! status: ${response.status}, message: ${errorData.message}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            console.log('Login successful:', data);\r\n\r\n            // Update the context with the token and username\r\n            setAuth({ token: data.token, username: data.username });\r\n\r\n            // Navigate to the home page or another page\r\n            navigate('/');\r\n        } catch (error) {\r\n            console.error('Error during login:', error);\r\n            window.alert(`An error occurred: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <h3>Login</h3>\r\n            <form onSubmit={onSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor='usernameOrAccountNumber'>Username or Account Number</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        className='form-control'\r\n                        id=\"usernameOrAccountNumber\"\r\n                        value={form.usernameOrAccountNumber}\r\n                        onChange={(e) => updateForm({ usernameOrAccountNumber: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div className='form-group'>\r\n                    <label htmlFor='password'>Password</label>\r\n                    <input\r\n                        type='password'\r\n                        className='form-control'\r\n                        id='password'\r\n                        value={form.password}\r\n                        onChange={(e) => updateForm({ password: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div className='form-group'>\r\n                    <input\r\n                        type='submit'\r\n                        value='Login'\r\n                        className='btn btn-primary'\r\n                    />\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}